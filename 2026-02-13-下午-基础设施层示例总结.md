# åŸºç¡€è®¾æ–½å±‚ç¤ºä¾‹æ€»ç»“ï¼ˆ2026-02-13 ä¸‹åˆï¼‰

## ğŸ“Š æ–°å¢ç¤ºä¾‹ç»Ÿè®¡

æœ¬æ¬¡æ›´æ–°æ–°å¢ **5ä¸ªåŸºç¡€è®¾æ–½å±‚ç¤ºä¾‹**ï¼Œæ¶µç›–ç½‘ç»œç¼–ç¨‹ã€è¿æ¥æ± ã€ç¼“å­˜ã€é‡è¯•å’Œäº‹ä»¶æ€»çº¿ç­‰æ ¸å¿ƒåŸºç¡€è®¾æ–½æ¨¡å¼ã€‚

## ğŸ“¦ æ–°å¢ç¤ºä¾‹è¯¦æƒ…

### 1. SocketDemo.java - ç½‘ç»œç¼–ç¨‹

**ä½ç½®**: `src/advanced/SocketDemo.java`

**å­¦ä¹ ç›®æ ‡**:
1. ç†è§£TCP/IP Socketé€šä¿¡åŸç†
2. æŒæ¡å®¢æˆ·ç«¯-æœåŠ¡å™¨ç¼–ç¨‹æ¨¡å‹
3. å­¦ä¼šå¤„ç†å¤šå®¢æˆ·ç«¯å¹¶å‘è¿æ¥
4. äº†è§£Tomcat/Nettyçš„åº•å±‚åŸç†

**æ ¸å¿ƒå†…å®¹**:
- åŸºç¡€Socketå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨
- å¤šå®¢æˆ·ç«¯å¹¶å‘æœåŠ¡å™¨ï¼ˆä½¿ç”¨çº¿ç¨‹æ± ï¼‰
- URLå’ŒHTTPè¿æ¥
- EchoæœåŠ¡å™¨ã€å¿ƒè·³æ£€æµ‹
- è¶…æ—¶å¤„ç†å’Œå¼‚å¸¸å¤„ç†

**Springåº”ç”¨**:
- TomcatæœåŠ¡å™¨åº•å±‚ä½¿ç”¨Socket
- Nettyæ¡†æ¶çš„åŸºç¡€æ˜¯NIO Socket
- WebSocketé€šä¿¡

**è¿è¡Œæ–¹å¼**:
```bash
javac -d target/classes -encoding UTF-8 src/advanced/SocketDemo.java
java -cp target/classes advanced.SocketDemo
```

---

### 2. ConnectionPoolDemo.java - æ•°æ®åº“è¿æ¥æ± 

**ä½ç½®**: `src/advanced/ConnectionPoolDemo.java`

**å­¦ä¹ ç›®æ ‡**:
1. ç†è§£æ•°æ®åº“è¿æ¥æ± çš„ä½œç”¨
2. æŒæ¡è¿æ¥æ± çš„å®ç°åŸç†
3. å­¦ä¼šè¿æ¥æ± çš„é…ç½®å’Œä½¿ç”¨
4. äº†è§£HikariCPçš„ä¼˜åŠ¿

**æ ¸å¿ƒå†…å®¹**:
- æ²¡æœ‰è¿æ¥æ± çš„é—®é¢˜æ¼”ç¤º
- è‡ªå®šä¹‰SimpleConnectionPoolå®ç°
- æœ€å¤§è¿æ¥æ•°æ§åˆ¶
- å¹¶å‘è¿æ¥è·å–å’Œé‡Šæ”¾
- HikariCPé…ç½®æœ€ä½³å®è·µ

**Springåº”ç”¨**:
- Spring Booté»˜è®¤ä½¿ç”¨HikariCP
- DataSourceé…ç½®
- è¿æ¥æ± ç›‘æ§å’Œæ€§èƒ½è°ƒä¼˜
- spring.datasource.hikari.*é…ç½®

**è¿è¡Œæ–¹å¼**:
```bash
javac -d target/classes -encoding UTF-8 src/advanced/ConnectionPoolDemo.java
java -cp target/classes advanced.ConnectionPoolDemo
```

---

### 3. CacheDemo.java - ç¼“å­˜æœºåˆ¶

**ä½ç½®**: `src/advanced/CacheDemo.java`

**å­¦ä¹ ç›®æ ‡**:
1. ç†è§£ç¼“å­˜çš„ä½œç”¨å’Œåº”ç”¨åœºæ™¯
2. æŒæ¡LRUç¼“å­˜ç®—æ³•å®ç°
3. å­¦ä¹ TTLè¿‡æœŸç¼“å­˜æœºåˆ¶
4. äº†è§£å¸¸è§ç¼“å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**æ ¸å¿ƒå†…å®¹**:
- LRUç¼“å­˜å®ç°ï¼ˆLinkedHashMapï¼‰
- TTLè¿‡æœŸç¼“å­˜ï¼ˆCacheWithExpirationï¼‰
- ç¼“å­˜ç­–ç•¥å¯¹æ¯”ï¼ˆLRUã€LFUã€FIFOã€TTLã€Write-Throughã€Write-Backï¼‰
- ç¼“å­˜é—®é¢˜è¯¦è§£ï¼š
  * ç¼“å­˜ç©¿é€ï¼ˆCache Penetrationï¼‰
  * ç¼“å­˜å‡»ç©¿ï¼ˆCache Breakdownï¼‰
  * ç¼“å­˜é›ªå´©ï¼ˆCache Avalancheï¼‰
- å®æˆ˜åœºæ™¯ï¼š
  * UserCacheService - ç”¨æˆ·ä¿¡æ¯ç¼“å­˜
  * RateLimiterCache - é™æµç¼“å­˜
  * ConfigCache - é…ç½®ç¼“å­˜

**Springåº”ç”¨**:
- @Cacheableã€@CacheEvictã€@CachePutæ³¨è§£
- Spring CacheæŠ½è±¡
- Redisç¼“å­˜é›†æˆ
- Caffeineæœ¬åœ°ç¼“å­˜

**è¿è¡Œæ–¹å¼**:
```bash
javac -d target/classes -encoding UTF-8 src/advanced/CacheDemo.java
java -cp target/classes advanced.CacheDemo
```

---

### 4. RetryDemo.java - é‡è¯•æœºåˆ¶

**ä½ç½®**: `src/advanced/RetryDemo.java`

**å­¦ä¹ ç›®æ ‡**:
1. ç†è§£é‡è¯•æœºåˆ¶çš„ä½œç”¨å’Œåœºæ™¯
2. æŒæ¡å›ºå®šå»¶è¿Ÿå’ŒæŒ‡æ•°é€€é¿ç­–ç•¥
3. å­¦ä¹ æ¡ä»¶é‡è¯•ï¼ˆæ ¹æ®å¼‚å¸¸ç±»å‹ï¼‰
4. äº†è§£Spring Retryçš„åŸºæœ¬åŸç†

**æ ¸å¿ƒå†…å®¹**:
- åŸºç¡€é‡è¯•æœºåˆ¶ï¼ˆæœ€å¤§é‡è¯•æ¬¡æ•°æ§åˆ¶ï¼‰
- å›ºå®šå»¶è¿Ÿé‡è¯•ï¼ˆFixed Delayï¼‰
- æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆExponential Backoffï¼‰
- æ¡ä»¶é‡è¯•ï¼ˆåªé‡è¯•ç‰¹å®šå¼‚å¸¸ï¼‰
- RetryExecutoré€šç”¨é‡è¯•æ‰§è¡Œå™¨
- å®æˆ˜åœºæ™¯ï¼š
  * HttpClientWithRetry - HTTPè¯·æ±‚é‡è¯•
  * DatabaseService - æ•°æ®åº“æ­»é”é‡è¯•
  * MessageSender - æ¶ˆæ¯å‘é€é‡è¯•

**Springåº”ç”¨**:
- @Retryableæ³¨è§£
- Spring Retryæ¡†æ¶
- å¾®æœåŠ¡é—´è°ƒç”¨é‡è¯•
- æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹å¤±è´¥é‡è¯•

**è¿è¡Œæ–¹å¼**:
```bash
javac -d target/classes -encoding UTF-8 src/advanced/RetryDemo.java
java -cp target/classes advanced.RetryDemo
```

---

### 5. EventBusDemo.java - äº‹ä»¶æ€»çº¿

**ä½ç½®**: `src/advanced/EventBusDemo.java`

**å­¦ä¹ ç›®æ ‡**:
1. ç†è§£äº‹ä»¶é©±åŠ¨æ¶æ„
2. æŒæ¡å‘å¸ƒ-è®¢é˜…æ¨¡å¼
3. å­¦ä¹ åŒæ­¥å’Œå¼‚æ­¥äº‹ä»¶å¤„ç†
4. äº†è§£Spring Eventæœºåˆ¶

**æ ¸å¿ƒå†…å®¹**:
- SimpleEventBus - åŸºç¡€äº‹ä»¶æ€»çº¿
- TypedEventBus - ç±»å‹å®‰å…¨çš„äº‹ä»¶ç³»ç»Ÿ
- AsyncEventBus - å¼‚æ­¥äº‹ä»¶æ€»çº¿
- QueryEventBus - å¸¦è¿”å›å€¼çš„æŸ¥è¯¢æ¨¡å¼
- äº‹ä»¶å¯¹è±¡è®¾è®¡ï¼ˆUserCreatedEventã€OrderCreatedEventï¼‰
- å®æˆ˜åœºæ™¯ï¼š
  * UserRegistrationProcess - ç”¨æˆ·æ³¨å†Œæµç¨‹
  * OrderProcessingSystem - è®¢å•å¤„ç†ç³»ç»Ÿ
  * AuditSystem - å®¡è®¡ç³»ç»Ÿ

**Springåº”ç”¨**:
- ApplicationEventå’ŒApplicationListener
- @EventListeneræ³¨è§£
- å¼‚æ­¥äº‹ä»¶å¤„ç†ï¼ˆ@Async + @EventListenerï¼‰
- äº‹åŠ¡äº‹ä»¶ç›‘å¬ï¼ˆ@TransactionalEventListenerï¼‰

**è¿è¡Œæ–¹å¼**:
```bash
javac -d target/classes -encoding UTF-8 src/advanced/EventBusDemo.java
java -cp target/classes advanced.EventBusDemo
```

---

## ğŸ”— çŸ¥è¯†å…³è”

### ä¸Spring Bootçš„å…³ç³»

è¿™5ä¸ªåŸºç¡€è®¾æ–½å±‚ç¤ºä¾‹ä¸ºå­¦ä¹ Spring Bootæ‰“ä¸‹åšå®åŸºç¡€ï¼š

| ç¤ºä¾‹ | Spring Bootå¯¹åº”æŠ€æœ¯ | é‡è¦æ€§ |
|-----|------------------|-------|
| SocketDemo | Tomcat/Nettyå†…åµŒæœåŠ¡å™¨ | â­â­â­ |
| ConnectionPoolDemo | HikariCPè¿æ¥æ±  | â­â­â­â­â­ |
| CacheDemo | Spring Cache + Redis | â­â­â­â­â­ |
| RetryDemo | Spring Retry | â­â­â­â­ |
| EventBusDemo | Spring Event | â­â­â­â­ |

### å­¦ä¹ é¡ºåºå»ºè®®

1. **ConnectionPoolDemo** - æ•°æ®åº“åŸºç¡€è®¾æ–½ï¼Œæœ€å¸¸ç”¨
2. **CacheDemo** - æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€æœ¯
3. **RetryDemo** - æé«˜ç³»ç»Ÿå¯é æ€§
4. **EventBusDemo** - å¾®æœåŠ¡è§£è€¦çš„åŸºç¡€
5. **SocketDemo** - ç†è§£åº•å±‚é€šä¿¡åŸç†

## ğŸ“ è¿è¡Œæ‰€æœ‰æ–°ç¤ºä¾‹

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæ‰€æœ‰5ä¸ªæ–°å¢ç¤ºä¾‹ï¼š

```bash
#!/bin/bash
echo "=== ç¼–è¯‘åŸºç¡€è®¾æ–½å±‚ç¤ºä¾‹ ==="
javac -d target/classes -encoding UTF-8 \
  src/advanced/SocketDemo.java \
  src/advanced/ConnectionPoolDemo.java \
  src/advanced/CacheDemo.java \
  src/advanced/RetryDemo.java \
  src/advanced/EventBusDemo.java

echo -e "\n=== è¿è¡Œç¤ºä¾‹ ===\n"

echo "1. SocketDemo - ç½‘ç»œç¼–ç¨‹"
java -cp target/classes advanced.SocketDemo
echo -e "\n----------------------------------------\n"

echo "2. ConnectionPoolDemo - æ•°æ®åº“è¿æ¥æ± "
java -cp target/classes advanced.ConnectionPoolDemo
echo -e "\n----------------------------------------\n"

echo "3. CacheDemo - ç¼“å­˜æœºåˆ¶"
java -cp target/classes advanced.CacheDemo
echo -e "\n----------------------------------------\n"

echo "4. RetryDemo - é‡è¯•æœºåˆ¶"
java -cp target/classes advanced.RetryDemo
echo -e "\n----------------------------------------\n"

echo "5. EventBusDemo - äº‹ä»¶æ€»çº¿"
java -cp target/classes advanced.EventBusDemo
echo -e "\n----------------------------------------\n"

echo "âœ… æ‰€æœ‰ç¤ºä¾‹è¿è¡Œå®Œæˆï¼"
```

ä¿å­˜ä¸º `test-infrastructure-examples.sh` å¹¶è¿è¡Œï¼š
```bash
chmod +x test-infrastructure-examples.sh
./test-infrastructure-examples.sh
```

## ğŸ¯ å­¦ä¹ æˆæœ

å®Œæˆè¿™5ä¸ªç¤ºä¾‹åï¼Œä½ å°†ï¼š

âœ… ç†è§£TCP/IPç½‘ç»œç¼–ç¨‹åŸºç¡€
âœ… æŒæ¡æ•°æ®åº“è¿æ¥æ± çš„åŸç†å’Œä½¿ç”¨
âœ… å­¦ä¼šç¼“å­˜è®¾è®¡å’Œå¸¸è§é—®é¢˜è§£å†³
âœ… æŒæ¡é‡è¯•æœºåˆ¶å’Œå®¹é”™è®¾è®¡
âœ… ç†è§£äº‹ä»¶é©±åŠ¨æ¶æ„å’Œè§£è€¦è®¾è®¡

**ç°åœ¨ä½ å·²ç»å…·å¤‡äº†å®Œæ•´çš„JavaåŸºç¡€å’ŒåŸºç¡€è®¾æ–½çŸ¥è¯†ï¼Œå¯ä»¥å¼€å§‹Spring Bootå®æˆ˜äº†ï¼** ğŸš€

## ğŸ“š ä¸‹ä¸€æ­¥å­¦ä¹ 

### é€‰é¡¹1: å¼€å§‹Spring Bootï¼ˆå¼ºçƒˆæ¨èï¼‰
ç°åœ¨æ˜¯å¼€å§‹Spring Bootçš„æœ€ä½³æ—¶æœºï¼ä½ å·²ç»æŒæ¡ï¼š
- IoC/DIåŸç†ï¼ˆIoCDemoï¼‰
- AOPåˆ‡é¢ç¼–ç¨‹ï¼ˆAopDemoï¼‰
- æ•°æ®åº“è¿æ¥æ± ï¼ˆConnectionPoolDemoï¼‰
- ç¼“å­˜æœºåˆ¶ï¼ˆCacheDemoï¼‰
- é‡è¯•æœºåˆ¶ï¼ˆRetryDemoï¼‰
- äº‹ä»¶æ€»çº¿ï¼ˆEventBusDemoï¼‰

å¯ä»¥ç›´æ¥ç†è§£Spring Bootçš„æ ¸å¿ƒåŠŸèƒ½ï¼

### é€‰é¡¹2: ç»§ç»­æ·±å…¥JavaåŸºç¡€
å¦‚æœè¿˜æƒ³ç»§ç»­æ·±åŒ–JavaåŸºç¡€ï¼š
- JVMå†…å­˜æ¨¡å‹å’Œåƒåœ¾å›æ”¶
- æ€§èƒ½è°ƒä¼˜å’Œç›‘æ§
- æ›´å¤šè®¾è®¡æ¨¡å¼
- åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€

## ğŸ’¡ å¤‡æ³¨

- æ‰€æœ‰ç¤ºä¾‹éƒ½å¸¦æœ‰è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Š
- æ¯ä¸ªç¤ºä¾‹éƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œ
- ç¤ºä¾‹åŒ…å«å®é™…åº”ç”¨åœºæ™¯
- ä»£ç éµå¾ªé¡¹ç›®ç¼–ç è§„èŒƒ
