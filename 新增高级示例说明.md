# æ–°å¢é«˜çº§ç¤ºä¾‹è¯´æ˜

æœ¬æ¬¡æ–°å¢ 4 ä¸ªé«˜çº§ Java ç¤ºä¾‹ï¼Œä¸“æ³¨äº Spring Framework å‡†å¤‡çš„å…³é”®æŠ€æœ¯ç‚¹ã€‚

## ğŸ“‹ æ–°å¢ç¤ºä¾‹åˆ—è¡¨

### 1. NioDemo.java - NIO æ–‡ä»¶æ“ä½œ â­â­â­â­

**ä½ç½®**ï¼š`src/advanced/NioDemo.java`

**å­¦ä¹ é‡ç‚¹**ï¼š
- Path å’Œ Files å·¥å…·ç±»çš„ç°ä»£åŒ–æ–‡ä»¶æ“ä½œ
- FileChannel + ByteBuffer çš„é€šé“ç¼“å†²åŒºæœºåˆ¶
- ç›®å½•éå†å’Œæ–‡ä»¶æŸ¥æ‰¾ï¼ˆPathMatcherï¼‰
- WatchService æ–‡ä»¶ç›‘å¬æœºåˆ¶

**ä¸ Spring çš„å…³ç³»**ï¼š
- **Netty/Tomcat NIO**ï¼šSpring Boot å†…åµŒæœåŠ¡å™¨ä½¿ç”¨ NIO å¤„ç†ç½‘ç»œ I/O
- **èµ„æºç®¡ç†**ï¼šSpring çš„ ResourceLoader ä½¿ç”¨ NIO æ‰«æç±»è·¯å¾„
- **æ–‡ä»¶ä¸Šä¼ **ï¼šMultipartFile åº•å±‚ä½¿ç”¨ NIO æé«˜æ€§èƒ½
- **çƒ­åŠ è½½**ï¼šSpring DevTools ä½¿ç”¨ WatchService ç›‘å¬æ–‡ä»¶å˜åŒ–

**è¿è¡Œæ–¹å¼**ï¼š
```bash
java -cp target/classes advanced.NioDemo
```

**å…³é”® API**ï¼š
- `Files.createTempFile()` / `Files.write()` / `Files.readAllLines()`
- `FileChannel.open()` / `ByteBuffer.allocate()`
- `Files.walk()` / `FileSystems.getDefault().getPathMatcher()`
- `WatchService` + `StandardWatchEventKinds`

---

### 2. LoggingDemo.java - SLF4J + Logback æ—¥å¿—æ¡†æ¶ â­â­â­â­â­

**ä½ç½®**ï¼š`src/advanced/LoggingDemo.java`

**å­¦ä¹ é‡ç‚¹**ï¼š
- æ—¥å¿—çº§åˆ«ï¼ˆTRACE < DEBUG < INFO < WARN < ERRORï¼‰
- å‚æ•°åŒ–æ—¥å¿—ï¼ˆé¿å…å­—ç¬¦ä¸²æ‹¼æ¥ï¼‰
- å¼‚å¸¸å †æ ˆè®°å½•
- MDC è¯Šæ–­ä¸Šä¸‹æ–‡ï¼ˆåˆ†å¸ƒå¼è¿½è¸ªï¼‰
- æ€§èƒ½ä¼˜åŒ–ï¼ˆisDebugEnabled åˆ¤æ–­ï¼‰

**ä¸ Spring çš„å…³ç³»**ï¼š
- **Spring Boot é»˜è®¤æ—¥å¿—**ï¼šé»˜è®¤é›†æˆ SLF4J + Logback
- **ç»Ÿä¸€æ—¥å¿—è§„èŒƒ**ï¼šæ›¿ä»£ System.out.println()
- **åˆ†å¸ƒå¼è¿½è¸ª**ï¼šSpring Cloud Sleuth ä½¿ç”¨ MDC ä¼ é€’ traceId
- **å…¨å±€å¼‚å¸¸å¤„ç†**ï¼š@ControllerAdvice ä¸­è®°å½•å¼‚å¸¸æ—¥å¿—

**è¿è¡Œæ–¹å¼**ï¼š
```bash
java -cp "target/classes:~/.m2/repository/org/slf4j/slf4j-api/2.0.9/slf4j-api-2.0.9.jar:~/.m2/repository/ch/qos/logback/logback-classic/1.4.14/logback-classic-1.4.14.jar:~/.m2/repository/ch/qos/logback/logback-core/1.4.14/logback-core-1.4.14.jar" advanced.LoggingDemo
```

**æœ€ä½³å®è·µ**ï¼š
```java
// âœ… æ¨èï¼šå‚æ•°åŒ–æ—¥å¿—
log.info("ç”¨æˆ· {} ç™»å½•æˆåŠŸï¼ŒIP: {}", username, ipAddress);

// âŒ ä¸æ¨èï¼šå­—ç¬¦ä¸²æ‹¼æ¥
log.info("ç”¨æˆ· " + username + " ç™»å½•æˆåŠŸï¼ŒIP: " + ipAddress);

// âœ… æ¨èï¼šMDC è¿½è¸ª
MDC.put("requestId", "REQ-12345");
log.info("å¤„ç†è®¢å•");  // æ—¥å¿—è‡ªåŠ¨åŒ…å« requestId
MDC.clear();
```

**Spring Boot é…ç½®**ï¼š
```properties
logging.level.root=INFO
logging.level.com.example=DEBUG
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
```

---

### 3. ScheduledTaskDemo.java - å®šæ—¶ä»»åŠ¡ â­â­â­â­

**ä½ç½®**ï¼š`src/advanced/ScheduledTaskDemo.java`

**å­¦ä¹ é‡ç‚¹**ï¼š
- Timer vs ScheduledExecutorService å¯¹æ¯”
- `scheduleAtFixedRate` vs `scheduleWithFixedDelay` åŒºåˆ«
- å®šæ—¶ä»»åŠ¡çš„å¸¸è§æ¨¡å¼ï¼ˆå›ºå®šé€Ÿç‡ã€å›ºå®šå»¶è¿Ÿã€åˆå§‹å»¶è¿Ÿï¼‰
- Spring @Scheduled æ³¨è§£ç”¨æ³•

**ä¸ Spring çš„å…³ç³»**ï¼š
- **@Scheduled åº•å±‚**ï¼šSpring ä½¿ç”¨ ScheduledExecutorService æ‰§è¡Œå®šæ—¶ä»»åŠ¡
- **å®šæ—¶æ•°æ®åŒæ­¥**ï¼šå®šæœŸä»ç¬¬ä¸‰æ–¹ API æ‹‰å–æ•°æ®
- **ç¼“å­˜åˆ·æ–°**ï¼šå®šæœŸæ›´æ–°ç¼“å­˜æ•°æ®
- **å®šæ—¶æŠ¥è¡¨**ï¼šæ¯æ—¥/æ¯å‘¨/æ¯æœˆç”Ÿæˆä¸šåŠ¡æŠ¥è¡¨

**è¿è¡Œæ–¹å¼**ï¼š
```bash
java -cp target/classes advanced.ScheduledTaskDemo
```

**æ ¸å¿ƒåŒºåˆ«**ï¼š
| æ–¹æ³• | æ‰§è¡Œæ—¶æœº | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|
| `scheduleAtFixedRate` | å›ºå®šé¢‘ç‡ï¼ˆä»»åŠ¡å¯èƒ½å¹¶å‘ï¼‰ | å¿ƒè·³æ£€æµ‹ã€æ•°æ®é‡‡é›† |
| `scheduleWithFixedDelay` | ä¸Šæ¬¡ç»“æŸåå»¶è¿Ÿï¼ˆä¸ä¼šå¹¶å‘ï¼‰ | æ•°æ®å¤„ç†ã€æ¸…ç†ä»»åŠ¡ |

**Spring æ³¨è§£å¯¹ç…§**ï¼š
```java
// å›ºå®šé€Ÿç‡ï¼šæ¯ 5 ç§’æ‰§è¡Œ
@Scheduled(fixedRate = 5000)
public void syncData() { }

// å›ºå®šå»¶è¿Ÿï¼šä¸Šæ¬¡å®Œæˆåå»¶è¿Ÿ 10 ç§’
@Scheduled(fixedDelay = 10000)
public void cleanCache() { }

// Cron è¡¨è¾¾å¼ï¼šæ¯å¤©å‡Œæ™¨ 2 ç‚¹
@Scheduled(cron = "0 0 2 * * ?")
public void generateReport() { }

// åˆå§‹å»¶è¿Ÿ + å›ºå®šé€Ÿç‡
@Scheduled(initialDelay = 60000, fixedRate = 300000)
public void checkHealth() { }
```

---

### 4. SerializationDemo.java - Java åºåˆ—åŒ– â­â­â­â­

**ä½ç½®**ï¼š`src/advanced/SerializationDemo.java`

**å­¦ä¹ é‡ç‚¹**ï¼š
- Serializable æ¥å£å’ŒåŸºæœ¬åºåˆ—åŒ–
- `transient` å…³é”®å­—ï¼ˆå­—æ®µæ’é™¤ï¼‰
- `serialVersionUID` ç‰ˆæœ¬æ§åˆ¶
- è‡ªå®šä¹‰åºåˆ—åŒ–ï¼ˆwriteObject/readObjectï¼‰
- æ·±æ‹·è´å®ç°

**ä¸ Spring çš„å…³ç³»**ï¼š
- **Session æŒä¹…åŒ–**ï¼šHttpSession å¯¹è±¡å­˜å‚¨åˆ° Redis éœ€è¦åºåˆ—åŒ–
- **åˆ†å¸ƒå¼ç¼“å­˜**ï¼šSpring Cache + Redis éœ€è¦åºåˆ—åŒ–å¯¹è±¡
- **RPC è°ƒç”¨**ï¼šDubboã€Feign è¿œç¨‹æ–¹æ³•è°ƒç”¨ä¼ é€’å¯¹è±¡
- **åŸå‹ Bean**ï¼š@Scope("prototype") é€šè¿‡åºåˆ—åŒ–å®ç°æ·±æ‹·è´

**è¿è¡Œæ–¹å¼**ï¼š
```bash
java -cp "target/classes:~/.m2/repository/org/slf4j/slf4j-api/2.0.9/slf4j-api-2.0.9.jar:~/.m2/repository/ch/qos/logback/logback-classic/1.4.14/logback-classic-1.4.14.jar:~/.m2/repository/ch/qos/logback/logback-core/1.4.14/logback-core-1.4.14.jar" advanced.SerializationDemo
```

**æœ€ä½³å®è·µ**ï¼š
```java
public class User implements Serializable {
    private static final long serialVersionUID = 1L;  // âœ… æ˜¾å¼å£°æ˜ç‰ˆæœ¬å·

    private String username;
    private transient String password;  // âœ… æ•æ„Ÿä¿¡æ¯ä¸åºåˆ—åŒ–
    private String email;

    // âœ… è‡ªå®šä¹‰åºåˆ—åŒ–ï¼ˆåŠ å¯†æ•æ„Ÿå­—æ®µï¼‰
    private void writeObject(ObjectOutputStream oos) throws IOException {
        oos.defaultWriteObject();
        // åŠ å¯†åå†™å…¥
        oos.writeObject(encrypt(sensitiveData));
    }

    // âœ… è‡ªå®šä¹‰ååºåˆ—åŒ–ï¼ˆè§£å¯†æ•æ„Ÿå­—æ®µï¼‰
    private void readObject(ObjectInputStream ois) throws Exception {
        ois.defaultReadObject();
        // è¯»å–åè§£å¯†
        this.sensitiveData = decrypt((String) ois.readObject());
    }
}
```

**Spring åºåˆ—åŒ–é…ç½®**ï¼š
```java
// Redis åºåˆ—åŒ–é…ç½®
@Bean
public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {
    RedisTemplate<String, Object> template = new RedisTemplate<>();
    template.setConnectionFactory(factory);
    // ä½¿ç”¨ Jackson åºåˆ—åŒ–
    template.setDefaultSerializer(new GenericJackson2JsonRedisSerializer());
    return template;
}
```

---

## ğŸ¯ å­¦ä¹ è·¯å¾„å»ºè®®

### åˆå­¦è€…è·¯å¾„
1. **LoggingDemo** â†’ ç†è§£æ—¥å¿—æ¡†æ¶ï¼Œæ›¿ä»£ System.out
2. **SerializationDemo** â†’ ç†è§£å¯¹è±¡æŒä¹…åŒ–
3. **ScheduledTaskDemo** â†’ ç†è§£å®šæ—¶ä»»åŠ¡
4. **NioDemo** â†’ ç†è§£ç°ä»£ I/O æ“ä½œ

### Spring å‡†å¤‡è·¯å¾„
1. **LoggingDemo** â†’ Spring Boot æ—¥å¿—é…ç½®
2. **ScheduledTaskDemo** â†’ @Scheduled æ³¨è§£ä½¿ç”¨
3. **SerializationDemo** â†’ Redis Session å­˜å‚¨
4. **NioDemo** â†’ æ–‡ä»¶ä¸Šä¼ å’Œèµ„æºåŠ è½½

---

## ğŸ“Š æŠ€æœ¯æ ˆå¯¹åº”å…³ç³»

| Java åŸºç¡€ | Spring Framework | Spring Boot |
|-----------|------------------|-------------|
| SLF4J + Logback | Spring æ—¥å¿—æŠ½è±¡ | spring-boot-starter-logging |
| ScheduledExecutorService | @Scheduled | @EnableScheduling |
| Java åºåˆ—åŒ– | RedisTemplate | spring-boot-starter-data-redis |
| NIO File API | ResourceLoader | spring-boot-starter-web (æ–‡ä»¶ä¸Šä¼ ) |

---

## ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘

å®Œæˆè¿™ 4 ä¸ªç¤ºä¾‹åï¼Œå»ºè®®å­¦ä¹ ï¼š

1. **Spring Boot å¯åŠ¨å™¨** - å¼€å§‹å®é™… Spring Boot é¡¹ç›®
2. **Spring MVC** - æ„å»º RESTful API
3. **Spring Data JPA** - æ•°æ®åº“æ“ä½œ
4. **Spring Security** - å®‰å…¨è®¤è¯æˆæƒ
5. **Spring Cloud** - å¾®æœåŠ¡æ¶æ„

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### ä¾èµ–ç®¡ç†
æ‰€æœ‰ç¤ºä¾‹ä½¿ç”¨é¡¹ç›®å·²é…ç½®çš„ä¾èµ–ï¼š
- SLF4J 2.0.9 + Logback 1.4.14ï¼ˆæ—¥å¿—ï¼‰
- JUnit 5.10.1ï¼ˆæµ‹è¯•æ¡†æ¶ï¼‰
- Lombok 1.18.30ï¼ˆä»£ç ç®€åŒ–ï¼‰

### Java ç‰ˆæœ¬
- é¡¹ç›®é…ç½®ï¼šJava 17
- æ‰€æœ‰ç¤ºä¾‹å‡ä¸º Java 17 å…¼å®¹ä»£ç 
- é¿å…ä½¿ç”¨ Java 21 çš„æ–°ç‰¹æ€§ï¼ˆå¦‚è™šæ‹Ÿçº¿ç¨‹ï¼‰

### ç¼–è¯‘è¿è¡Œ
```bash
# ç¼–è¯‘æ‰€æœ‰æ–‡ä»¶
javac -d target/classes -sourcepath src src/advanced/*.java

# è¿è¡Œç¤ºä¾‹ï¼ˆéœ€è¦æ·»åŠ æ—¥å¿—ä¾èµ–åˆ° classpathï¼‰
java -cp "target/classes:~/.m2/repository/..." advanced.ç¤ºä¾‹ç±»å
```

---

## ğŸ“ å­¦ä¹ æ£€æŸ¥æ¸…å•

å®Œæˆæ¯ä¸ªç¤ºä¾‹åï¼Œç¡®ä¿èƒ½å¤Ÿå›ç­”ä»¥ä¸‹é—®é¢˜ï¼š

### NioDemo
- [ ] NIO ä¸ä¼ ç»Ÿ I/O çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
- [ ] ByteBuffer çš„ positionã€limitã€capacity çš„å«ä¹‰ï¼Ÿ
- [ ] Spring Boot å¦‚ä½•ä½¿ç”¨ NIO æé«˜æ€§èƒ½ï¼Ÿ

### LoggingDemo
- [ ] ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ—¥å¿—æ¡†æ¶è€Œä¸æ˜¯ System.outï¼Ÿ
- [ ] å‚æ•°åŒ–æ—¥å¿—çš„æ€§èƒ½ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ
- [ ] MDC åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä½œç”¨ï¼Ÿ

### ScheduledTaskDemo
- [ ] fixedRate å’Œ fixedDelay çš„åŒºåˆ«ï¼Ÿ
- [ ] Spring @Scheduled æ”¯æŒå“ªäº›é…ç½®æ–¹å¼ï¼Ÿ
- [ ] Cron è¡¨è¾¾å¼çš„åŸºæœ¬æ ¼å¼ï¼Ÿ

### SerializationDemo
- [ ] ä»€ä¹ˆæ—¶å€™éœ€è¦åºåˆ—åŒ–ï¼Ÿ
- [ ] transient å…³é”®å­—çš„ä½œç”¨ï¼Ÿ
- [ ] serialVersionUID ä¸ºä»€ä¹ˆè¦æ˜¾å¼å£°æ˜ï¼Ÿ
- [ ] å¦‚ä½•é€šè¿‡åºåˆ—åŒ–å®ç°æ·±æ‹·è´ï¼Ÿ

---

**ç¼–å†™æ—¶é—´**ï¼š2026-02-11
**ä½œè€…**ï¼šGitHub Copilot
**é¡¹ç›®**ï¼šjava-start (Java å­¦ä¹ å‡†å¤‡ - Spring Framework)
